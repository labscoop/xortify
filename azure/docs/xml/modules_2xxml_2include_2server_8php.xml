<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.4">
  <compounddef id="modules_2xxml_2include_2server_8php" kind="file">
    <compoundname>server.php</compoundname>
    <innernamespace refid="namespaceapi">api</innernamespace>
      <sectiondef kind="var">
      <memberdef kind="variable" id="modules_2xxml_2include_2server_8php_1a3aaf40baac36e278c7d7c9139df1750c" prot="public" static="no" mutable="no">
        <type></type>
        <definition>$mode</definition>
        <argsstring></argsstring>
        <name>$mode</name>
        <initializer>= (isset($_REQUEST[&apos;outputmode&apos;])?(string)$_REQUEST[&apos;outputmode&apos;]:&apos;json&apos;)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" line="228" column="1" bodyfile="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" bodystart="228" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="modules_2xxml_2include_2server_8php_1a147a766daa03d52576c7345fea31c945" prot="public" static="no" mutable="no">
        <type></type>
        <definition>$parser</definition>
        <argsstring></argsstring>
        <name>$parser</name>
        <initializer>= (isset($_REQUEST[&apos;parser&apos;])?(string)$_REQUEST[&apos;parser&apos;]:&apos;http&apos;)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" line="229" column="1" bodyfile="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" bodystart="229" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="modules_2xxml_2include_2server_8php_1ada8a7130088351710bb02ed622d6bf65" prot="public" static="no" mutable="no">
        <type></type>
        <definition>$plugin</definition>
        <argsstring></argsstring>
        <name>$plugin</name>
        <initializer>= $_REQUEST[&apos;xrestplugin&apos;]</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" line="230" column="1" bodyfile="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" bodystart="230" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="modules_2xxml_2include_2server_8php_1a3a14292722020f5076fa1465350a8e68" prot="public" static="no" mutable="no">
        <type></type>
        <definition>$GLOBALS[&apos;xrestPlugin&apos;]</definition>
        <argsstring>[&apos;xrestPlugin&apos;]</argsstring>
        <name>$GLOBALS</name>
        <initializer>= $plugin</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" line="231" column="1" bodyfile="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" bodystart="231" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="modules_2xxml_2include_2server_8php_1a0a4baf0b22973c07685c3981f0d17fc4" prot="public" static="no" mutable="no">
        <type></type>
        <definition>$path</definition>
        <argsstring></argsstring>
        <name>$path</name>
        <initializer>= parse_url(XOOPS_URL.$_SERVER[&apos;REQUEST_URI&apos;], PHP_URL_PATH)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" line="234" column="1" bodyfile="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" bodystart="234" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="modules_2xxml_2include_2server_8php_1abb35c8495a232b510389fa6d7b15d38a" prot="public" static="no" mutable="no">
        <type></type>
        <definition>$request</definition>
        <argsstring></argsstring>
        <name>$request</name>
        <initializer>= parse_url(XOOPS_URL.$_SERVER[&apos;REQUEST_URI&apos;], PHP_URL_QUERY)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" line="239" column="1" bodyfile="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" bodystart="239" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="modules_2xxml_2include_2server_8php_1affc45c6ace2eeb3f300b054dbf9592b6" prot="public" static="no" mutable="no">
        <type></type>
        <definition>$values</definition>
        <argsstring></argsstring>
        <name>$values</name>
        <initializer>= array()</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" line="240" column="1" bodyfile="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" bodystart="240" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="modules_2xxml_2include_2server_8php_1a42eec151d60db44f976e7c3112aa59c7" prot="public" static="no" mutable="no">
        <type>if(isset($_POST)) if(isset($_GET))</type>
        <definition>$xoopsPreload</definition>
        <argsstring></argsstring>
        <name>$xoopsPreload</name>
        <initializer>=&amp; XoopsPreload::getInstance()</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" line="259" column="1" bodyfile="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" bodystart="259" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="modules_2xxml_2include_2server_8php_1a8d746571063b5fd6ec78b0632e57b0bd" prot="public" static="no" mutable="no">
        <type>global</type>
        <definition>global $xoopsModuleConfig</definition>
        <argsstring></argsstring>
        <name>$xoopsModuleConfig</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" line="262" column="1" bodyfile="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" bodystart="262" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="modules_2xxml_2include_2server_8php_1ab3ab98606b7a592c3804f643b2d2cd9d" prot="public" static="no" mutable="no">
        <type>global</type>
        <definition>global $xoopsModule</definition>
        <argsstring></argsstring>
        <name>$xoopsModule</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" line="262" column="1" bodyfile="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" bodystart="262" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="modules_2xxml_2include_2server_8php_1ab43edfdb9338a9071e689ea64f0dc975" prot="public" static="no" mutable="no">
        <type></type>
        <definition>$ttlresult</definition>
        <argsstring></argsstring>
        <name>$ttlresult</name>
        <initializer>= array()</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" line="263" column="1" bodyfile="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" bodystart="263" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="modules_2xxml_2include_2server_8php_1a214978dede22bc8768c43dc59f3350a8" prot="public" static="no" mutable="no">
        <type></type>
        <definition>$funct</definition>
        <argsstring></argsstring>
        <name>$funct</name>
        <initializer>= new <ref refid="class_functions_handler" kindref="compound">FunctionsHandler</ref>()</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" line="269" column="1" bodyfile="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" bodystart="269" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="modules_2xxml_2include_2server_8php_1a3386223949f1e798ea1a5dd31c63cea5" prot="public" static="no" mutable="no">
        <type></type>
        <definition>foreach ($funct-&gt;GetServerExtensions() as $extension) $FunctionDefine</definition>
        <argsstring></argsstring>
        <name>$FunctionDefine</name>
        <initializer>= array()</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" line="271" column="1" bodyfile="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" bodystart="271" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="modules_2xxml_2include_2server_8php_1a01ca5b44b6de6b0164fda9b985409dc3" prot="public" static="no" mutable="no">
        <type></type>
        <definition>foreach($FunctionDefine as $id=&gt; $func)</definition>
        <argsstring>($FunctionDefine as $id=&gt; $func)</argsstring>
        <name>foreach</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" line="285" column="1" bodyfile="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" bodystart="285" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="modules_2xxml_2include_2server_8php_1aabc52e4f78557f0e0b360a8aaba6e11d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>obj2array</definition>
        <argsstring>($objects)</argsstring>
        <name>obj2array</name>
        <param>
          <declname>$objects</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" line="24" column="1" bodyfile="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" bodystart="24" bodyend="171"/>
      </memberdef>
      <memberdef kind="function" id="modules_2xxml_2include_2server_8php_1a45534e41f649590e036c67a8fa047787" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>if(!function_exists(&quot;xxml_xml2array&quot;))</type>
        <definition>if (!function_exists(&quot;xxml_xml2array&quot;)) xxml_toXML</definition>
        <argsstring>($array, $name=&apos;array&apos;, $standalone=TRUE, $beginning=TRUE, $nested=0)</argsstring>
        <name>xxml_toXML</name>
        <param>
          <declname>$array</declname>
        </param>
        <param>
          <declname>$name</declname>
          <defval>&apos;array&apos;</defval>
        </param>
        <param>
          <declname>$standalone</declname>
          <defval>TRUE</defval>
        </param>
        <param>
          <declname>$beginning</declname>
          <defval>TRUE</defval>
        </param>
        <param>
          <declname>$nested</declname>
          <defval>0</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" line="183" column="1" bodyfile="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php" bodystart="183" bodyend="399"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="normal">&lt;?php</highlight></codeline>
<codeline lineno="19"><highlight class="comment">/*<sp/><sp/>Converts<sp/>an<sp/>Object<sp/>to<sp/>and<sp/>Array</highlight></codeline>
<codeline lineno="20"><highlight class="comment"><sp/>*<sp/><sp/>obj2array($objects)</highlight></codeline>
<codeline lineno="21"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="22"><highlight class="comment"><sp/>*<sp/><sp/>@return<sp/>array</highlight></codeline>
<codeline lineno="23"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/>obj2array($objects)<sp/>{</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/>$ret<sp/>=<sp/>array();</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">foreach</highlight><highlight class="normal">($objects<sp/>as<sp/>$key<sp/>=&gt;<sp/>$value)<sp/>{</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(is_a($value,<sp/></highlight><highlight class="stringliteral">&apos;stdClass&apos;</highlight><highlight class="normal">))<sp/>{</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$ret[$key]<sp/>=<sp/>obj2array((array)$value);</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/>elseif<sp/>(is_array($value))<sp/>{</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$ret[$key]<sp/>=<sp/>obj2array((array)$value);</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$ret[$key]<sp/>=<sp/>$value;</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$ret;</highlight></codeline>
<codeline lineno="36"><highlight class="normal">}</highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!function_exists(</highlight><highlight class="stringliteral">&quot;xxml_xml2array&quot;</highlight><highlight class="normal">))<sp/>{</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>Converts<sp/>an<sp/>string<sp/>of<sp/>XML<sp/>to<sp/>an<sp/>Associative<sp/>Array</highlight></codeline>
<codeline lineno="42"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/><sp/>xxml_xml2array($contents,<sp/>$get_attributes=1,<sp/>$priority<sp/>=<sp/>&apos;tag&apos;)</highlight></codeline>
<codeline lineno="43"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*</highlight></codeline>
<codeline lineno="44"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/><sp/>@param<sp/>string<sp/>$contents<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>XML<sp/>Content</highlight></codeline>
<codeline lineno="45"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/><sp/>@param<sp/>boolean<sp/>$get_attributes<sp/><sp/>Get<sp/>Element<sp/>Attributes</highlight></codeline>
<codeline lineno="46"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/><sp/>@param<sp/>string<sp/>$priority<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>XML<sp/>Tag<sp/>with<sp/>basis<sp/>of<sp/>priority</highlight></codeline>
<codeline lineno="47"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/><sp/>@return<sp/>array</highlight></codeline>
<codeline lineno="48"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/>xxml_xml2array($contents,<sp/>$get_attributes=1,<sp/>$priority<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;tag&apos;</highlight><highlight class="normal">)<sp/>{<sp/></highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!$contents)<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>array();<sp/></highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!function_exists(</highlight><highlight class="stringliteral">&apos;xml_parser_create&apos;</highlight><highlight class="normal">))<sp/>{<sp/></highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>array();<sp/></highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Get<sp/>the<sp/>XML<sp/>parser<sp/>of<sp/>PHP<sp/>-<sp/>PHP<sp/>must<sp/>have<sp/>this<sp/>module<sp/>for<sp/>the<sp/>parser<sp/>to<sp/>work</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$parser<sp/>=<sp/>xml_parser_create(</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">);<sp/></highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xml_parser_set_option($parser,<sp/>XML_OPTION_TARGET_ENCODING,<sp/></highlight><highlight class="stringliteral">&quot;UTF-8&quot;</highlight><highlight class="normal">);<sp/>#<sp/>http:</highlight><highlight class="comment">//minutillo.com/steve/weblog/2004/6/17/php-xml-and-character-encodings-a-tale-of-sadness-rage-and-data-loss</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xml_parser_set_option($parser,<sp/>XML_OPTION_CASE_FOLDING,<sp/>0);<sp/></highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xml_parser_set_option($parser,<sp/>XML_OPTION_SKIP_WHITE,<sp/>1);<sp/></highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xml_parse_into_struct($parser,<sp/>trim($contents),<sp/>$xml_values);<sp/></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>xml_parser_free($parser);<sp/></highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!$xml_values)<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight><highlight class="comment">//Hmm...<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Initializations<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$xml_array<sp/>=<sp/>array();<sp/></highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$parents<sp/>=<sp/>array();<sp/></highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$opened_tags<sp/>=<sp/>array();<sp/></highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$arr<sp/>=<sp/>array();<sp/></highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$current<sp/>=<sp/>&amp;$xml_array;<sp/></highlight><highlight class="comment">//Refference<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Go<sp/>through<sp/>the<sp/>tags.<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$repeated_tag_index<sp/>=<sp/>array();</highlight><highlight class="comment">//Multiple<sp/>tags<sp/>with<sp/>same<sp/>name<sp/>will<sp/>be<sp/>turned<sp/>into<sp/>an<sp/>array</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">foreach</highlight><highlight class="normal">($xml_values<sp/>as<sp/>$data)<sp/>{<sp/></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>unset($attributes,$value);</highlight><highlight class="comment">//Remove<sp/>existing<sp/>values,<sp/>or<sp/>there<sp/>will<sp/>be<sp/>trouble</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//This<sp/>command<sp/>will<sp/>extract<sp/>these<sp/>variables<sp/>into<sp/>the<sp/>foreach<sp/>scope<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>tag(string),<sp/>type(string),<sp/>level(int),<sp/>attributes(array).<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>extract($data);</highlight><highlight class="comment">//We<sp/>could<sp/>use<sp/>the<sp/>array<sp/>by<sp/>itself,<sp/>but<sp/>this<sp/>cooler.<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>array();<sp/></highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$attributes_data<sp/>=<sp/>array();<sp/></highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(isset($value))<sp/>{<sp/></highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">($priority<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;tag&apos;</highlight><highlight class="normal">)<sp/>$result<sp/>=<sp/>$value;<sp/></highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>$result[</highlight><highlight class="stringliteral">&apos;value&apos;</highlight><highlight class="normal">]<sp/>=<sp/>$value;<sp/></highlight><highlight class="comment">//Put<sp/>the<sp/>value<sp/>in<sp/>a<sp/>assoc<sp/>array<sp/>if<sp/>we<sp/>are<sp/>in<sp/>the<sp/>&apos;Attribute&apos;<sp/>mode</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Set<sp/>the<sp/>attributes<sp/>too.<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(isset($attributes)<sp/>and<sp/>$get_attributes)<sp/>{<sp/></highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">foreach</highlight><highlight class="normal">($attributes<sp/>as<sp/>$attr<sp/>=&gt;<sp/>$val)<sp/>{<sp/></highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">($priority<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;tag&apos;</highlight><highlight class="normal">)<sp/>$attributes_data[$attr]<sp/>=<sp/>$val;<sp/></highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>$result[</highlight><highlight class="stringliteral">&apos;attr&apos;</highlight><highlight class="normal">][$attr]<sp/>=<sp/>$val;<sp/></highlight><highlight class="comment">//Set<sp/>all<sp/>the<sp/>attributes<sp/>in<sp/>a<sp/>array<sp/>called<sp/>&apos;attr&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//See<sp/>tag<sp/>status<sp/>and<sp/>do<sp/>the<sp/>needed.<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">($type<sp/>==<sp/></highlight><highlight class="stringliteral">&quot;open&quot;</highlight><highlight class="normal">)<sp/>{</highlight><highlight class="comment">//The<sp/>starting<sp/>of<sp/>the<sp/>tag<sp/>&apos;&lt;tag&gt;&apos;<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$parent[$level-1]<sp/>=<sp/>&amp;$current;<sp/></highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!is_array($current)<sp/>or<sp/>(!in_array($tag,<sp/>array_keys($current))))<sp/>{<sp/></highlight><highlight class="comment">//Insert<sp/>New<sp/>tag</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$current[$tag]<sp/>=<sp/>$result;<sp/></highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">($attributes_data)<sp/>$current[$tag.<sp/></highlight><highlight class="stringliteral">&apos;_attr&apos;</highlight><highlight class="normal">]<sp/>=<sp/>$attributes_data;</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$repeated_tag_index[$tag.</highlight><highlight class="charliteral">&apos;_&apos;</highlight><highlight class="normal">.$level]<sp/>=<sp/>1;<sp/></highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$current<sp/>=<sp/>&amp;$current[$tag];<sp/></highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{<sp/></highlight><highlight class="comment">//There<sp/>was<sp/>another<sp/>element<sp/>with<sp/>the<sp/>same<sp/>tag<sp/>name<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(isset($current[$tag][0]))<sp/>{</highlight><highlight class="comment">//If<sp/>there<sp/>is<sp/>a<sp/>0th<sp/>element<sp/>it<sp/>is<sp/>already<sp/>an<sp/>array</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$current[$tag][$repeated_tag_index[$tag.</highlight><highlight class="charliteral">&apos;_&apos;</highlight><highlight class="normal">.$level]]<sp/>=<sp/>$result;</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$repeated_tag_index[$tag.</highlight><highlight class="charliteral">&apos;_&apos;</highlight><highlight class="normal">.$level]++;<sp/></highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight><highlight class="comment">//This<sp/>section<sp/>will<sp/>make<sp/>the<sp/>value<sp/>an<sp/>array<sp/>if<sp/>multiple<sp/>tags<sp/>with<sp/>the<sp/>same<sp/>name<sp/>appear<sp/>together</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$current[$tag]<sp/>=<sp/>array($current[$tag],$result);</highlight><highlight class="comment">//This<sp/>will<sp/>combine<sp/>the<sp/>existing<sp/>item<sp/>and<sp/>the<sp/>new<sp/>item<sp/>together<sp/>to<sp/>make<sp/>an<sp/>array</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$repeated_tag_index[$tag.</highlight><highlight class="charliteral">&apos;_&apos;</highlight><highlight class="normal">.$level]<sp/>=<sp/>2;<sp/></highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(isset($current[$tag.</highlight><highlight class="stringliteral">&apos;_attr&apos;</highlight><highlight class="normal">]))<sp/>{<sp/></highlight><highlight class="comment">//The<sp/>attribute<sp/>of<sp/>the<sp/>last(0th)<sp/>tag<sp/>must<sp/>be<sp/>moved<sp/>as<sp/>well</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$current[$tag][</highlight><highlight class="stringliteral">&apos;0_attr&apos;</highlight><highlight class="normal">]<sp/>=<sp/>$current[$tag.</highlight><highlight class="stringliteral">&apos;_attr&apos;</highlight><highlight class="normal">];<sp/></highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>unset($current[$tag.</highlight><highlight class="stringliteral">&apos;_attr&apos;</highlight><highlight class="normal">]);<sp/></highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$last_item_index<sp/>=<sp/>$repeated_tag_index[$tag.</highlight><highlight class="charliteral">&apos;_&apos;</highlight><highlight class="normal">.$level]-1;<sp/></highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$current<sp/>=<sp/>&amp;$current[$tag][$last_item_index];<sp/></highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/>elseif($type<sp/>==<sp/></highlight><highlight class="stringliteral">&quot;complete&quot;</highlight><highlight class="normal">)<sp/>{<sp/></highlight><highlight class="comment">//Tags<sp/>that<sp/>ends<sp/>in<sp/>1<sp/>line<sp/>&apos;&lt;tag<sp/>/&gt;&apos;<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//See<sp/>if<sp/>the<sp/>key<sp/>is<sp/>already<sp/>taken.<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!isset($current[$tag]))<sp/>{<sp/></highlight><highlight class="comment">//New<sp/>Key<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$current[$tag]<sp/>=<sp/>$result;<sp/></highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$repeated_tag_index[$tag.</highlight><highlight class="charliteral">&apos;_&apos;</highlight><highlight class="normal">.$level]<sp/>=<sp/>1;<sp/></highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">($priority<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;tag&apos;</highlight><highlight class="normal"><sp/>and<sp/>$attributes_data)<sp/>$current[$tag.<sp/></highlight><highlight class="stringliteral">&apos;_attr&apos;</highlight><highlight class="normal">]<sp/>=<sp/>$attributes_data;</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{<sp/></highlight><highlight class="comment">//If<sp/>taken,<sp/>put<sp/>all<sp/>things<sp/>inside<sp/>a<sp/>list(array)<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(isset($current[$tag][0])<sp/>and<sp/>is_array($current[$tag]))<sp/>{</highlight><highlight class="comment">//If<sp/>it<sp/>is<sp/>already<sp/>an<sp/>array...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>...push<sp/>the<sp/>new<sp/>element<sp/>into<sp/>that<sp/>array.<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$current[$tag][$repeated_tag_index[$tag.</highlight><highlight class="charliteral">&apos;_&apos;</highlight><highlight class="normal">.$level]]<sp/>=<sp/>$result;</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">($priority<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;tag&apos;</highlight><highlight class="normal"><sp/>and<sp/>$get_attributes<sp/>and<sp/>$attributes_data)<sp/>{</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$current[$tag][$repeated_tag_index[$tag.</highlight><highlight class="charliteral">&apos;_&apos;</highlight><highlight class="normal">.$level]<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;_attr&apos;</highlight><highlight class="normal">]<sp/>=<sp/>$attributes_data;</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$repeated_tag_index[$tag.</highlight><highlight class="charliteral">&apos;_&apos;</highlight><highlight class="normal">.$level]++;<sp/></highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{<sp/></highlight><highlight class="comment">//If<sp/>it<sp/>is<sp/>not<sp/>an<sp/>array...<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$current[$tag]<sp/>=<sp/>array($current[$tag],$result);<sp/></highlight><highlight class="comment">//...Make<sp/>it<sp/>an<sp/>array<sp/>using<sp/>using<sp/>the<sp/>existing<sp/>value<sp/>and<sp/>the<sp/>new<sp/>value</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$repeated_tag_index[$tag.</highlight><highlight class="charliteral">&apos;_&apos;</highlight><highlight class="normal">.$level]<sp/>=<sp/>1;<sp/></highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">($priority<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;tag&apos;</highlight><highlight class="normal"><sp/>and<sp/>$get_attributes)<sp/>{<sp/></highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(isset($current[$tag.</highlight><highlight class="stringliteral">&apos;_attr&apos;</highlight><highlight class="normal">]))<sp/>{<sp/></highlight><highlight class="comment">//The<sp/>attribute<sp/>of<sp/>the<sp/>last(0th)<sp/>tag<sp/>must<sp/>be<sp/>moved<sp/>as<sp/>well</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$current[$tag][</highlight><highlight class="stringliteral">&apos;0_attr&apos;</highlight><highlight class="normal">]<sp/>=<sp/>$current[$tag.</highlight><highlight class="stringliteral">&apos;_attr&apos;</highlight><highlight class="normal">];<sp/></highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>unset($current[$tag.</highlight><highlight class="stringliteral">&apos;_attr&apos;</highlight><highlight class="normal">]);<sp/></highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">($attributes_data)<sp/>{<sp/></highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$current[$tag][$repeated_tag_index[$tag.</highlight><highlight class="charliteral">&apos;_&apos;</highlight><highlight class="normal">.$level]<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;_attr&apos;</highlight><highlight class="normal">]<sp/>=<sp/>$attributes_data;</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$repeated_tag_index[$tag.</highlight><highlight class="charliteral">&apos;_&apos;</highlight><highlight class="normal">.$level]++;<sp/></highlight><highlight class="comment">//0<sp/>and<sp/>1<sp/>index<sp/>is<sp/>already<sp/>taken</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/>elseif($type<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;close&apos;</highlight><highlight class="normal">)<sp/>{<sp/></highlight><highlight class="comment">//End<sp/>of<sp/>tag<sp/>&apos;&lt;/tag&gt;&apos;<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$current<sp/>=<sp/>&amp;$parent[$level-1];<sp/></highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">($xml_array);<sp/></highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="171"><highlight class="normal">}<sp/><sp/></highlight></codeline>
<codeline lineno="172"><highlight class="normal"></highlight></codeline>
<codeline lineno="173"><highlight class="normal"></highlight><highlight class="comment">/*<sp/><sp/>Converts<sp/>an<sp/>Array<sp/>to<sp/>Streamed<sp/>XML</highlight></codeline>
<codeline lineno="174"><highlight class="comment"><sp/>*<sp/><sp/>xxml_toXML($array,<sp/>$name=&apos;array&apos;,<sp/>$standalone=TRUE,<sp/>$beginning=TRUE,<sp/>$nested<sp/>=<sp/>0)</highlight></codeline>
<codeline lineno="175"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="176"><highlight class="comment"><sp/>*<sp/><sp/>@param<sp/>array<sp/>$array<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Array<sp/>to<sp/>convert<sp/>to<sp/>XML</highlight></codeline>
<codeline lineno="177"><highlight class="comment"><sp/>*<sp/><sp/>@param<sp/>string<sp/>$name<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Namespace<sp/>of<sp/>XML<sp/>Document</highlight></codeline>
<codeline lineno="178"><highlight class="comment"><sp/>*<sp/><sp/>@param<sp/>boolean<sp/>$standalone<sp/><sp/><sp/><sp/><sp/><sp/>Output<sp/>headers<sp/>as<sp/>standalone<sp/>function</highlight></codeline>
<codeline lineno="179"><highlight class="comment"><sp/>*<sp/><sp/>@param<sp/>boolean<sp/>$beginning<sp/><sp/><sp/><sp/><sp/><sp/><sp/>At<sp/>the<sp/>beginning<sp/>of<sp/>internal<sp/>functional<sp/>loop</highlight></codeline>
<codeline lineno="180"><highlight class="comment"><sp/>*<sp/><sp/>@param<sp/>integer<sp/>$nested<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Tab<sp/>Levels<sp/>of<sp/>nesting</highlight></codeline>
<codeline lineno="181"><highlight class="comment"><sp/>*<sp/><sp/>@return<sp/>string</highlight></codeline>
<codeline lineno="182"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="183"><highlight class="normal"></highlight><highlight class="keyword">function</highlight><highlight class="normal"><sp/>xxml_toXML($array,<sp/>$name=</highlight><highlight class="stringliteral">&apos;array&apos;</highlight><highlight class="normal">,<sp/>$standalone=TRUE,<sp/>$beginning=TRUE,<sp/>$nested<sp/>=<sp/>0)<sp/></highlight></codeline>
<codeline lineno="184"><highlight class="normal">{</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($beginning)<sp/>{</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($standalone)</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>header(</highlight><highlight class="stringliteral">&quot;content-type:text/xml;charset=&quot;</highlight><highlight class="normal">._CHARSET);</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$output<sp/>.=<sp/></highlight><highlight class="charliteral">&apos;&lt;&apos;</highlight><highlight class="normal">.</highlight><highlight class="charliteral">&apos;?&apos;</highlight><highlight class="normal">.</highlight><highlight class="stringliteral">&apos;xml<sp/>version=&quot;1.0&quot;<sp/>encoding=&quot;&apos;</highlight><highlight class="normal">._CHARSET.</highlight><highlight class="charliteral">&apos;&quot;&apos;</highlight><highlight class="normal">.</highlight><highlight class="charliteral">&apos;?&apos;</highlight><highlight class="normal">.</highlight><highlight class="charliteral">&apos;&gt;&apos;</highlight><highlight class="normal"><sp/>.<sp/></highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal">;<sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$output<sp/>.=<sp/></highlight><highlight class="charliteral">&apos;&lt;&apos;</highlight><highlight class="normal"><sp/>.<sp/>$name<sp/>.<sp/></highlight><highlight class="charliteral">&apos;&gt;&apos;</highlight><highlight class="normal"><sp/>.<sp/></highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$nested<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(is_array($array))<sp/>{</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">foreach</highlight><highlight class="normal"><sp/>($array<sp/>as<sp/>$key=&gt;$value)<sp/>{</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$nested++;<sp/><sp/></highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(is_array($value))<sp/>{</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$output<sp/>.=<sp/>str_repeat(</highlight><highlight class="stringliteral">&quot;\t&quot;</highlight><highlight class="normal">,<sp/>(1<sp/>*<sp/>$nested))<sp/>.<sp/></highlight><highlight class="charliteral">&apos;&lt;&apos;</highlight><highlight class="normal"><sp/>.<sp/>(is_string($key)<sp/>?<sp/>$key<sp/>:<sp/>$name.</highlight><highlight class="charliteral">&apos;_&apos;</highlight><highlight class="normal"><sp/>.<sp/>$key)<sp/>.<sp/></highlight><highlight class="charliteral">&apos;&gt;&apos;</highlight><highlight class="normal"><sp/>.<sp/></highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$nested++;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$output<sp/>.=<sp/>xxml_toXML($value,<sp/>$name,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">,<sp/>$nested);</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$nested--;</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$output<sp/>.=<sp/>str_repeat(</highlight><highlight class="stringliteral">&quot;\t&quot;</highlight><highlight class="normal">,<sp/>(1<sp/>*<sp/>$nested))<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;&lt;/&apos;</highlight><highlight class="normal"><sp/>.<sp/>(is_string($key)<sp/>?<sp/>$key<sp/>:<sp/>$name.</highlight><highlight class="charliteral">&apos;_&apos;</highlight><highlight class="normal"><sp/>.<sp/>$key)<sp/>.<sp/></highlight><highlight class="charliteral">&apos;&gt;&apos;</highlight><highlight class="normal"><sp/>.<sp/></highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(strlen($value)&gt;0)<sp/>{</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$nested++;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$output<sp/>.=<sp/>str_repeat(</highlight><highlight class="stringliteral">&quot;\t&quot;</highlight><highlight class="normal">,<sp/>(1<sp/>*<sp/>$nested))<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;<sp/><sp/>&lt;&apos;</highlight><highlight class="normal"><sp/>.<sp/>(is_string($key)<sp/>?<sp/>$key<sp/>:<sp/>$name.</highlight><highlight class="charliteral">&apos;_&apos;</highlight><highlight class="normal"><sp/>.<sp/>$key)<sp/>.<sp/></highlight><highlight class="charliteral">&apos;&gt;&apos;</highlight><highlight class="normal"><sp/>.<sp/>trim(htmlspecialchars($value))<sp/>.<sp/></highlight><highlight class="stringliteral">&apos;&lt;/&apos;</highlight><highlight class="normal"><sp/>.<sp/>(is_string($key)<sp/>?<sp/>$key<sp/>:<sp/>$name.</highlight><highlight class="charliteral">&apos;_&apos;</highlight><highlight class="normal"><sp/>.<sp/>$key)<sp/>.<sp/></highlight><highlight class="charliteral">&apos;&gt;&apos;</highlight><highlight class="normal"><sp/>.<sp/></highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$nested--;</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$nested--;</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/>elseif<sp/>(strlen($array)&gt;0)<sp/>{</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$nested++;<sp/></highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$output<sp/>.=<sp/>str_repeat(</highlight><highlight class="stringliteral">&quot;\t&quot;</highlight><highlight class="normal">,<sp/>(1<sp/>*<sp/>$nested))<sp/>.<sp/>trim(htmlspecialchars($array))<sp/>.</highlight><highlight class="stringliteral">&quot;\n&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$nested--;</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($beginning)<sp/>{</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$output<sp/>.=<sp/></highlight><highlight class="stringliteral">&apos;&lt;/&apos;</highlight><highlight class="normal"><sp/>.<sp/>$name<sp/>.<sp/></highlight><highlight class="charliteral">&apos;&gt;&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$output;</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>$output;</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="223"><highlight class="normal">}<sp/></highlight></codeline>
<codeline lineno="224"><highlight class="normal"></highlight></codeline>
<codeline lineno="225"><highlight class="normal"></highlight></codeline>
<codeline lineno="226"><highlight class="normal"></highlight></codeline>
<codeline lineno="227"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Gets<sp/>Execution<sp/>Mode</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="normal">$mode<sp/>=<sp/>(isset($_REQUEST[</highlight><highlight class="stringliteral">&apos;outputmode&apos;</highlight><highlight class="normal">])?(string)$_REQUEST[</highlight><highlight class="stringliteral">&apos;outputmode&apos;</highlight><highlight class="normal">]:</highlight><highlight class="stringliteral">&apos;json&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="229"><highlight class="normal">$parser<sp/>=<sp/>(isset($_REQUEST[</highlight><highlight class="stringliteral">&apos;parser&apos;</highlight><highlight class="normal">])?(string)$_REQUEST[</highlight><highlight class="stringliteral">&apos;parser&apos;</highlight><highlight class="normal">]:</highlight><highlight class="stringliteral">&apos;http&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="230"><highlight class="normal">$plugin<sp/>=<sp/>$_REQUEST[</highlight><highlight class="stringliteral">&apos;xrestplugin&apos;</highlight><highlight class="normal">];</highlight></codeline>
<codeline lineno="231"><highlight class="normal">$GLOBALS[</highlight><highlight class="stringliteral">&apos;xrestPlugin&apos;</highlight><highlight class="normal">]<sp/>=<sp/>$plugin;</highlight></codeline>
<codeline lineno="232"><highlight class="normal"></highlight></codeline>
<codeline lineno="233"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Gets<sp/>URI<sp/>Values<sp/>and<sp/>POST<sp/>and<sp/>GET<sp/>Values</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="234"><highlight class="normal">$path<sp/>=<sp/>parse_url(XOOPS_URL.$_SERVER[</highlight><highlight class="stringliteral">&apos;REQUEST_URI&apos;</highlight><highlight class="normal">],<sp/>PHP_URL_PATH);</highlight></codeline>
<codeline lineno="235"><highlight class="normal"></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(substr($path,0,1)!=</highlight><highlight class="charliteral">&apos;\\&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/>$path<sp/>.=<sp/></highlight><highlight class="charliteral">&apos;\\&apos;</highlight><highlight class="normal"><sp/>.$path;</highlight></codeline>
<codeline lineno="237"><highlight class="normal"></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(substr($path,strlen($path)-1,1)!=</highlight><highlight class="charliteral">&apos;\\&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/>$path<sp/>.=<sp/>$path<sp/>.<sp/></highlight><highlight class="charliteral">&apos;\\&apos;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="239"><highlight class="normal">$request<sp/>=<sp/>parse_url(XOOPS_URL.$_SERVER[</highlight><highlight class="stringliteral">&apos;REQUEST_URI&apos;</highlight><highlight class="normal">],<sp/>PHP_URL_QUERY);</highlight></codeline>
<codeline lineno="240"><highlight class="normal">$values<sp/>=<sp/>array();</highlight></codeline>
<codeline lineno="241"><highlight class="normal">parse_str($request,<sp/>$values);</highlight></codeline>
<codeline lineno="242"><highlight class="normal"></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(isset($_POST))<sp/>{</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">foreach</highlight><highlight class="normal">($_POST<sp/>as<sp/>$field<sp/>=&gt;<sp/>$value)<sp/>{</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($field==$plugin)</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$values[$field]<sp/>=<sp/>obj2array(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>SimpleXMLElement(str_replace(</highlight><highlight class="stringliteral">&apos;\\&quot;&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="charliteral">&apos;&quot;&apos;</highlight><highlight class="normal">,<sp/>$value)));</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$values[$field]<sp/>=<sp/>$value;</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="249"><highlight class="normal">}</highlight></codeline>
<codeline lineno="250"><highlight class="normal"></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(isset($_GET))<sp/>{</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">foreach</highlight><highlight class="normal">($_GET<sp/>as<sp/>$field<sp/>=&gt;<sp/>$value)<sp/>{</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($field==$plugin)</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$values[$field]<sp/>=<sp/>obj2array(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>SimpleXMLElement(str_replace(</highlight><highlight class="stringliteral">&apos;\\&quot;&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="charliteral">&apos;&quot;&apos;</highlight><highlight class="normal">,<sp/>$value)));</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$values[$field]<sp/>=<sp/>$value;</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="257"><highlight class="normal">}</highlight></codeline>
<codeline lineno="258"><highlight class="normal"></highlight></codeline>
<codeline lineno="259"><highlight class="normal">$xoopsPreload<sp/>=&amp;<sp/>XoopsPreload::getInstance();</highlight></codeline>
<codeline lineno="260"><highlight class="normal">$xoopsPreload-&gt;triggerEvent(</highlight><highlight class="stringliteral">&apos;api.server.start&apos;</highlight><highlight class="normal">,<sp/>array($mode,<sp/>$plugin,<sp/>$path,<sp/>$request,<sp/>$values));</highlight></codeline>
<codeline lineno="261"><highlight class="normal"></highlight></codeline>
<codeline lineno="262"><highlight class="normal">global<sp/>$xoopsModuleConfig,$xoopsModule;</highlight></codeline>
<codeline lineno="263"><highlight class="normal">$ttlresult<sp/>=<sp/>array();</highlight></codeline>
<codeline lineno="264"><highlight class="normal"></highlight></codeline>
<codeline lineno="265"><highlight class="normal">xoops_load(</highlight><highlight class="stringliteral">&quot;xoopscache&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="266"><highlight class="normal"></highlight></codeline>
<codeline lineno="267"><highlight class="normal">require_once(XOOPS_ROOT_PATH.</highlight><highlight class="stringliteral">&apos;/modules/&apos;</highlight><highlight class="normal">.$xoopsModule-&gt;dirname().</highlight><highlight class="stringliteral">&apos;/class/class.functions.php&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="268"><highlight class="normal">require_once(</highlight><highlight class="stringliteral">&apos;common.php&apos;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="269"><highlight class="normal">$funct<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_functions_handler" kindref="compound">FunctionsHandler</ref>();</highlight></codeline>
<codeline lineno="270"><highlight class="normal"></highlight></codeline>
<codeline lineno="271"><highlight class="normal">$FunctionDefine<sp/>=<sp/>array();</highlight></codeline>
<codeline lineno="272"><highlight class="normal"></highlight><highlight class="keywordflow">foreach</highlight><highlight class="normal">($funct-&gt;GetServerExtensions()<sp/>as<sp/>$extension){</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/>global<sp/>$xoopsDB;</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/>$sql<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;SELECT<sp/>count(*)<sp/>rc<sp/>FROM<sp/>&quot;</highlight><highlight class="normal">.$xoopsDB-&gt;prefix(</highlight><highlight class="stringliteral">&apos;xml_plugins&apos;</highlight><highlight class="normal">).<sp/></highlight><highlight class="stringliteral">&quot;<sp/>where<sp/>active<sp/>=<sp/>1<sp/>and<sp/>plugin_file<sp/>=<sp/>&apos;&quot;</highlight><highlight class="normal">.$extension.</highlight><highlight class="stringliteral">&quot;&apos;&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/>$ret<sp/>=<sp/>$xoopsDB-&gt;query($sql);</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/>$row<sp/>=<sp/>$xoopsDB-&gt;fetchArray($ret);</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>($row[</highlight><highlight class="stringliteral">&apos;rc&apos;</highlight><highlight class="normal">]==1){</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>require_once(XOOPS_ROOT_PATH.</highlight><highlight class="stringliteral">&apos;/modules/xxml/plugins/&apos;</highlight><highlight class="normal">.<sp/>$extension);</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$FunctionDefine[]<sp/>=<sp/>substr(<sp/>$extension,0,strlen(<sp/>$extension)-4);</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="281"><highlight class="normal">}</highlight></codeline>
<codeline lineno="282"><highlight class="normal"></highlight></codeline>
<codeline lineno="283"><highlight class="normal">$FunctionDefine<sp/>=<sp/>array_unique($FunctionDefine);</highlight></codeline>
<codeline lineno="284"><highlight class="normal"></highlight></codeline>
<codeline lineno="285"><highlight class="normal"></highlight><highlight class="keywordflow">foreach</highlight><highlight class="normal">($FunctionDefine<sp/>as<sp/>$id<sp/>=&gt;<sp/>$func)<sp/><sp/>{</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!empty($_REQUEST[$func]))<sp/>{</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$elename<sp/>.=<sp/>(strlen($elename)&gt;0)?</highlight><highlight class="charliteral">&apos;_&apos;</highlight><highlight class="normal">.$func:</highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal">.$func;</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$opfunc<sp/>=<sp/>$func;</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$xsd<sp/>=<sp/>$func.</highlight><highlight class="stringliteral">&apos;_xsd&apos;</highlight><highlight class="normal">;<sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$opxsd<sp/>=<sp/>$xsd();</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(class_exists(</highlight><highlight class="stringliteral">&apos;SimpleXMLElement&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$opdata<sp/>=<sp/>obj2array(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>SimpleXMLElement(str_replace(</highlight><highlight class="stringliteral">&apos;\\&quot;&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="charliteral">&apos;&quot;&apos;</highlight><highlight class="normal">,<sp/>$_REQUEST[$func])));</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>elseif(!function_exists(</highlight><highlight class="stringliteral">&apos;xml_parser_create&apos;</highlight><highlight class="normal">))<sp/>{</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$opdata<sp/>=<sp/>xxml_xml2array(str_replace(</highlight><highlight class="stringliteral">&apos;\\&quot;&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="charliteral">&apos;&quot;&apos;</highlight><highlight class="normal">,<sp/>$_REQUEST[$func]),<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$opdata<sp/>=<sp/>$opdata[$func];</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!$result<sp/>=<sp/>XoopsCache::read(</highlight><highlight class="stringliteral">&apos;xxml_&apos;</highlight><highlight class="normal">.$opfunc.</highlight><highlight class="charliteral">&apos;_&apos;</highlight><highlight class="normal">.sha1(implode(</highlight><highlight class="charliteral">&apos;:&apos;</highlight><highlight class="normal">,<sp/>$opdata))))<sp/>{</highlight></codeline>
<codeline lineno="299"><highlight class="normal"></highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$tmp=array();</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!empty($opfunc))<sp/>{</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$fields=0;</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">foreach</highlight><highlight class="normal">($opxsd[</highlight><highlight class="stringliteral">&apos;request&apos;</highlight><highlight class="normal">]<sp/>as<sp/>$ii<sp/>=&gt;<sp/>$request)<sp/>{</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">foreach</highlight><highlight class="normal">($request[</highlight><highlight class="stringliteral">&apos;items&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;data&apos;</highlight><highlight class="normal">]<sp/>as<sp/>$iu<sp/>=&gt;<sp/>$field)</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!empty($field[</highlight><highlight class="stringliteral">&apos;items&apos;</highlight><highlight class="normal">]))<sp/>{</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$tmp[$fields]<sp/>=<sp/>$opdata[$field[</highlight><highlight class="stringliteral">&apos;items&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;objname&apos;</highlight><highlight class="normal">]]<sp/><sp/><sp/><sp/><sp/>;</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$fields++;</highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/>elseif<sp/>(!empty($field[</highlight><highlight class="stringliteral">&apos;name&apos;</highlight><highlight class="normal">])&amp;&amp;!empty($field[</highlight><highlight class="stringliteral">&apos;type&apos;</highlight><highlight class="normal">]))<sp/>{</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">($field[</highlight><highlight class="stringliteral">&apos;type&apos;</highlight><highlight class="normal">])<sp/>{</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;string&quot;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$tmp[$fields]<sp/>=<sp/>(string)$opdata[$field[</highlight><highlight class="stringliteral">&apos;name&apos;</highlight><highlight class="normal">]];</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;integer&quot;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$tmp[$fields]<sp/>=<sp/>(integer)$opdata[$field[</highlight><highlight class="stringliteral">&apos;name&apos;</highlight><highlight class="normal">]];<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;array&quot;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$tmp[$fields]<sp/>=<sp/>$opdata[$field[</highlight><highlight class="stringliteral">&apos;name&apos;</highlight><highlight class="normal">]];<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$fields++;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">($fields)<sp/>{</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>0:</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>$opfunc($ttlresult);</highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>1:</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>$opfunc($tmp[0],<sp/>$ttlresult);</highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>2:</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>$opfunc($tmp[0],<sp/>$tmp[1],<sp/>$ttlresult);</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>3:</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>$opfunc($tmp[0],<sp/>$tmp[1],<sp/>$tmp[2],<sp/>$ttlresult);</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>4:</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>$opfunc($tmp[0],<sp/>$tmp[1],<sp/>$tmp[2],<sp/>$tmp[3],<sp/>$ttlresult);</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>5:</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>$opfunc($tmp[0],<sp/>$tmp[1],<sp/>$tmp[2],<sp/>$tmp[3],<sp/>$tmp[4],<sp/>$ttlresult);</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>6:</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>$opfunc($tmp[0],<sp/>$tmp[1],<sp/>$tmp[2],<sp/>$tmp[3],<sp/>$tmp[4],<sp/>$tmp[5],<sp/>$ttlresult);</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>7:</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>$opfunc($tmp[0],<sp/>$tmp[1],<sp/>$tmp[2],<sp/>$tmp[3],<sp/>$tmp[4],<sp/>$tmp[5],<sp/>$tmp[6],<sp/>$ttlresult);</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>8:</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>$opfunc($tmp[0],<sp/>$tmp[1],<sp/>$tmp[2],<sp/>$tmp[3],<sp/>$tmp[4],<sp/>$tmp[5],<sp/>$tmp[6],<sp/>$tmp[7],<sp/>$ttlresult);</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>9:</highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>$opfunc($tmp[0],<sp/>$tmp[1],<sp/>$tmp[2],<sp/>$tmp[3],<sp/>$tmp[4],<sp/>$tmp[5],<sp/>$tmp[6],<sp/>$tmp[7],<sp/>$tmp[8],<sp/>$ttlresult);</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>10:</highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>$opfunc($tmp[0],<sp/>$tmp[1],<sp/>$tmp[2],<sp/>$tmp[3],<sp/>$tmp[4],<sp/>$tmp[5],<sp/>$tmp[6],<sp/>$tmp[7],<sp/>$tmp[8],<sp/>$tmp[9],<sp/>$ttlresult);</highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>11:</highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>$opfunc($tmp[0],<sp/>$tmp[1],<sp/>$tmp[2],<sp/>$tmp[3],<sp/>$tmp[4],<sp/>$tmp[5],<sp/>$tmp[6],<sp/>$tmp[7],<sp/>$tmp[8],<sp/>$tmp[9],<sp/>$tmp[10],<sp/>$ttlresult);</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>12:</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>$opfunc($tmp[0],<sp/>$tmp[1],<sp/>$tmp[2],<sp/>$tmp[3],<sp/>$tmp[4],<sp/>$tmp[5],<sp/>$tmp[6],<sp/>$tmp[7],<sp/>$tmp[8],<sp/>$tmp[9],<sp/>$tmp[10],<sp/>$tmp[11],<sp/>$ttlresult);</highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>13:</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>$opfunc($tmp[0],<sp/>$tmp[1],<sp/>$tmp[2],<sp/>$tmp[3],<sp/>$tmp[4],<sp/>$tmp[5],<sp/>$tmp[6],<sp/>$tmp[7],<sp/>$tmp[8],<sp/>$tmp[9],<sp/>$tmp[10],<sp/>$tmp[11],<sp/>$tmp[12],<sp/>$ttlresult);</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>14:</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>$opfunc($tmp[0],<sp/>$tmp[1],<sp/>$tmp[2],<sp/>$tmp[3],<sp/>$tmp[4],<sp/>$tmp[5],<sp/>$tmp[6],<sp/>$tmp[7],<sp/>$tmp[8],<sp/>$tmp[9],<sp/>$tmp[10],<sp/>$tmp[11],<sp/>$tmp[12],<sp/>$tmp[13],<sp/>$ttlresult);</highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>15:</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>$opfunc($tmp[0],<sp/>$tmp[1],<sp/>$tmp[2],<sp/>$tmp[3],<sp/>$tmp[4],<sp/>$tmp[5],<sp/>$tmp[6],<sp/>$tmp[7],<sp/>$tmp[8],<sp/>$tmp[9],<sp/>$tmp[10],<sp/>$tmp[11],<sp/>$tmp[12],<sp/>$tmp[13],<sp/>$tmp[14],<sp/>$ttlresult);</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>16:</highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>$opfunc($tmp[0],<sp/>$tmp[1],<sp/>$tmp[2],<sp/>$tmp[3],<sp/>$tmp[4],<sp/>$tmp[5],<sp/>$tmp[6],<sp/>$tmp[7],<sp/>$tmp[8],<sp/>$tmp[9],<sp/>$tmp[10],<sp/>$tmp[11],<sp/>$tmp[12],<sp/>$tmp[13],<sp/>$tmp[14],<sp/>$tmp[15],<sp/>$ttlresult);</highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>17:</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>$opfunc($tmp[0],<sp/>$tmp[1],<sp/>$tmp[2],<sp/>$tmp[3],<sp/>$tmp[4],<sp/>$tmp[5],<sp/>$tmp[6],<sp/>$tmp[7],<sp/>$tmp[8],<sp/>$tmp[9],<sp/>$tmp[10],<sp/>$tmp[11],<sp/>$tmp[12],<sp/>$tmp[13],<sp/>$tmp[14],<sp/>$tmp[15],<sp/>$tmp[16],<sp/>$ttlresult);</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>18:</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>$opfunc($tmp[0],<sp/>$tmp[1],<sp/>$tmp[2],<sp/>$tmp[3],<sp/>$tmp[4],<sp/>$tmp[5],<sp/>$tmp[6],<sp/>$tmp[7],<sp/>$tmp[8],<sp/>$tmp[9],<sp/>$tmp[10],<sp/>$tmp[11],<sp/>$tmp[12],<sp/>$tmp[13],<sp/>$tmp[14],<sp/>$tmp[15],<sp/>$tmp[16],<sp/>$tmp[17],<sp/>$ttlresult);</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>19:</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>$opfunc($tmp[0],<sp/>$tmp[1],<sp/>$tmp[2],<sp/>$tmp[3],<sp/>$tmp[4],<sp/>$tmp[5],<sp/>$tmp[6],<sp/>$tmp[7],<sp/>$tmp[8],<sp/>$tmp[9],<sp/>$tmp[10],<sp/>$tmp[11],<sp/>$tmp[12],<sp/>$tmp[13],<sp/>$tmp[14],<sp/>$tmp[15],<sp/>$tmp[16],<sp/>$tmp[17],<sp/>$tmp[18],<sp/>$ttlresult);</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>20:</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$result<sp/>=<sp/>$opfunc($tmp[0],<sp/>$tmp[1],<sp/>$tmp[2],<sp/>$tmp[3],<sp/>$tmp[4],<sp/>$tmp[5],<sp/>$tmp[6],<sp/>$tmp[7],<sp/>$tmp[8],<sp/>$tmp[9],<sp/>$tmp[10],<sp/>$tmp[11],<sp/>$tmp[12],<sp/>$tmp[13],<sp/>$tmp[14],<sp/>$tmp[15],<sp/>$tmp[16],<sp/>$tmp[17],<sp/>$tmp[18],<sp/>$tmp[19],<sp/>$ttlresult);</highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;<sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>XoopsCache::write(</highlight><highlight class="stringliteral">&apos;xxml_&apos;</highlight><highlight class="normal">.$opfunc.</highlight><highlight class="charliteral">&apos;_&apos;</highlight><highlight class="normal">.sha1(implode(</highlight><highlight class="charliteral">&apos;:&apos;</highlight><highlight class="normal">,<sp/>$opdata)),<sp/>$result,<sp/>$GLOBALS[</highlight><highlight class="stringliteral">&apos;xoopsModuleConfig&apos;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&apos;function_cache&apos;</highlight><highlight class="normal">]);</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$ttlresult<sp/>=<sp/>array_merge($ttlresult,<sp/>$result);</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>$ttlresult<sp/>=<sp/>array_merge($ttlresult,<sp/>$result);</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="399"><highlight class="normal">}</highlight></codeline>
<codeline lineno="400"><highlight class="normal"></highlight></codeline>
<codeline lineno="401"><highlight class="normal">echo<sp/>xxml_toXML($ttlresult,<sp/>$elename,<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="402"><highlight class="normal"></highlight></codeline>
<codeline lineno="403"><highlight class="normal">$xoopsPreload<sp/>=&amp;<sp/>XoopsPreload::getInstance();</highlight></codeline>
<codeline lineno="404"><highlight class="normal">$xoopsPreload-&gt;triggerEvent(</highlight><highlight class="stringliteral">&apos;api.server.end&apos;</highlight><highlight class="normal">,<sp/>array($mode,<sp/>$plugin,<sp/>$path,<sp/>$request,<sp/>$values,<sp/>$result));</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="406"><highlight class="normal">exit(0);</highlight></codeline>
<codeline lineno="407"><highlight class="normal">?&gt;</highlight></codeline>
    </programlisting>
    <location file="E:/Packages/xortify server/htdocs/modules/xxml/include/server.php"/>
  </compounddef>
</doxygen>
